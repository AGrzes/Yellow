type: SiteModel
menu:
  - name: News
    view:
      type: DeclarativeView
      contents:
        - type: List
          list:
            selector: this.type == 'Change'
            order:
              field: date
              direction: descending
          style: plain
          item:
            type: Card
            contents:
              - type: Field
                field: date
                format: date
                slot: header
              - type: Field
                field: description
                format: markdown
                slot: content 
  - name: Reference
    view:
      type: DeclarativeView
      contents: 
        - type: MesterDetail
          master:
            - type: TOC
              data:
                selector: 
                  type: ExpressionSelector
                  selector: this.type == 'Category' || this.type == 'Reference'    
                order:
                  field: name
              item:
                type: DetailsLink
                label: 
                  field: name    
          detail:
            - type: Switch
              case:
                field: type
              when:
                Category:
                  type: Card
                  contents:
                    - type: Field
                      field: name
                      slot: header
                    - type: LinkList
                      data: 
                        constructor: this.children
                      label:
                        fiels: name                
                Reference:
                  type: Card
                  contents:
                    - type: Field
                      field: name
                      slot: header
                    - type: Field
                      field: description
                      format: markdown
                      slot: content 
                God:   
                  type: Card
                  contents:
                    - type: Field
                      field: name
                      slot: header
                    - type: Property
                      field: character
                      label: Character
                      slot: content 
                    - type: Property
                      field: domain
                      label: Domain
                      slot: content    
                    - type: Property
                      field: symbol
                      label: Symbol
                      slot: content                                                                 
                    - type: Field
                      field: description
                      format: markdown
                      slot: content                          
  - name: Characters
    view:
      type: DeclarativeView
      contents: 
        - type: MesterDetail
          master:
            - type: TOC
              data:
                selector: 
                  type: ExpressionSelector
                  selector: this.type == 'Location' || !this.parent    
              children: this.sublocations    
              item:
                type: DetailsLink
                label: 
                  field: name    
          detail:  
            - type: Field
              field: name
              slot: header       
              pattern: People of {{this}}   
            - type: List
              list:
                selector: 
                  type: ExpressionSelector
                  selector: this.type == 'Character' || this.location == location
                  parameters:
                    location: this
              style: list
              item:
                type: ListItem
                contents:
                  - type: Field
                    field: name
                    slot: header
                  - type: Field
                    field: nickname
                    slot: sub-header                    
                  - type: Field
                    field: description
                    format: markdown
                    slot: content  
              #TODO define character lists                          
  - name: Organization
    view:
      type: DeclarativeView
      contents: 
        - type: MesterDetail
          master:
            - type: TOC
              data:
                selector: 
                  type: ExpressionSelector
                  selector: this.type == 'Organization' || !this.parent    
                order:
                  field: name
              children: this.children    
              item:
                type: DetailsLink
                label: 
                  field: name    
          detail:
            type: Card
            contents:
              - type: Field
                field: name
                slot: header
              - type: Field
                field: description
                format: markdown
                slot: content             
              - type: LinkList
                data: 
                  constructor: this.children
                label:
                  fiels: name                
  - name: Locations
    view:
      type: DeclarativeView
      contents: 
        - type: MesterDetail
          master:
            - type: TOC
              data:
                selector: 
                  type: ExpressionSelector
                  selector: this.type == 'Location' || !this.parent    
                order:
                  field: name
              children: this.sublocations    
              item:
                type: DetailsLink
                label: 
                  field: name    
          detail:
            type: Card
            contents:
              - type: Field
                field: name
                slot: header
              - type: Field
                field: description
                format: markdown
                slot: content             
              - type: LinkList
                header: Sub-Locations
                data: 
                  constructor: this.sublocations
                label:
                  fiels: name     
              - type: LinkList
                header: Neighbors
                data: 
                  constructor: this.neighbors
                label:
                  fiels: name                           
  - name: Items
    view:
      type: DeclarativeView
      contents:
        - type: List
          list:
            selector: 
              type: TypeSelector
              selector: Item
          style: plain
          item:
            type: Card
            contents:
              - type: Field
                field: kind
                slot: header
              - type: Field
                field: name
                slot: header                
              - type: Field
                field: value
                slot: header   
                decoration: badge              
              - type: Field
                field: description
                format: markdown
                slot: content 
  - name: Sessions
    view:
      type: DeclarativeView
      contents:
        - type: List
          list:
            selector: this.type == 'Session'
            order:
              field: date  
          style: plain
          item:
            type: Card
            hint:
             - collapse
            contents:
              - type: Field
                field: date
                format: date
                dateFormat: 'DD.MM.YYYY'
                slot: header
              - type: Static
                html: " - "
                slot: header              
              - type: Field
                field: name
                slot: header                
              - type: Field
                field: xp
                pattern: '{{this}} XP'
                slot: header  
                decoration: badge 
                hint: 
                  - right             
              - type: Field
                field: description
                format: markdown
                slot: content 
